<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>MVP Password Manager</title>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col items-center p-6">

  <h1 class="text-3xl font-bold mb-6">MVP Password Manager</h1>

  <!-- Master password input & file selection -->
  <div class="mb-6 w-full max-w-lg space-y-3">
    <div>
      <label for="masterPassword" class="block mb-1 font-semibold">Master Password (optional):</label>
      <input
        id="masterPassword"
        type="password"
        placeholder="Enter a master password or leave blank"
        class="border border-gray-300 rounded p-2 w-full"
      />
    </div>

    <div>
      <label class="block mb-1 font-semibold">Open Existing JSON File:</label>
      <input
        id="jsonFileInput"
        type="file"
        accept=".json"
        class="border border-gray-300 rounded p-2 w-full"
      />
    </div>

    <button
      id="loadJsonBtn"
      class="bg-blue-600 text-white w-full p-2 rounded hover:bg-blue-700">
      Load JSON File
    </button>
  </div>

  <!-- Create new JSON storage file -->
  <div class="mb-6 w-full max-w-lg space-y-2">
    <div class="font-semibold">Or create a new storage file:</div>
    <button
      id="createJsonBtn"
      class="bg-green-600 text-white w-full p-2 rounded hover:bg-green-700">
      Create New Storage
    </button>
  </div>

  <!-- Password entries list -->
  <div class="w-full max-w-2xl mb-6">
    <h2 class="text-2xl font-bold mb-3">Stored Entries</h2>
    <div class="overflow-x-auto rounded border border-gray-300 bg-white">
      <table class="min-w-full text-left">
        <thead>
          <tr class="bg-gray-100 border-b border-gray-300">
            <th class="p-3">Website</th>
            <th class="p-3">Username</th>
            <th class="p-3">Password</th>
          </tr>
        </thead>
        <tbody id="entriesTableBody" class="divide-y divide-gray-200">
          <!-- Dynamically populated -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Add new entry form -->
  <div class="mb-6 w-full max-w-lg bg-white rounded shadow p-4">
    <h2 class="text-xl font-bold mb-3">Add New Entry</h2>
    <form id="addEntryForm" class="flex flex-col space-y-3">
      <input
        type="text"
        id="websiteInput"
        placeholder="Website"
        class="border border-gray-300 p-2 rounded w-full"
      />
      <input
        type="text"
        id="usernameInput"
        placeholder="Username"
        class="border border-gray-300 p-2 rounded w-full"
      />
      <input
        type="text"
        id="passwordInput"
        placeholder="Password"
        class="border border-gray-300 p-2 rounded w-full"
      />
      <textarea
        id="noteInput"
        placeholder="Notes"
        class="border border-gray-300 p-2 rounded w-full"
      ></textarea>

      <button
        type="submit"
        class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700 w-full">
        Add Entry
      </button>
    </form>
  </div>

  <!-- Download changes button -->
  <div class="mb-6">
    <button
      id="downloadJsonBtn"
      class="bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700">
      Save & Download Current Storage
    </button>
  </div>

  <!-- Popup Modal (hidden by default) -->
  <div
    id="entryModal"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden"
  >
    <div class="bg-white rounded shadow-lg w-96 max-w-full p-6 relative">
      <button
        id="closeModalBtn"
        class="absolute top-2 right-2 text-gray-500 hover:text-gray-700"
      >
        âœ•
      </button>
      <h3 class="text-xl font-bold mb-4">Entry Details</h3>
      <p><strong>Website:</strong> <span id="modalWebsite" class="text-blue-600"></span></p>
      <p class="mt-2"><strong>Username:</strong>
        <span id="modalUsername" class="mr-2"></span>
        <button id="copyUsernameBtn" class="inline-flex items-center bg-gray-200 text-sm px-2 py-1 rounded hover:bg-gray-300">
          Copy
        </button>
      </p>
      <p class="mt-2"><strong>Password:</strong>
        <span id="modalPassword" class="mr-2"></span>
        <button id="copyPasswordBtn" class="inline-flex items-center bg-gray-200 text-sm px-2 py-1 rounded hover:bg-gray-300">
          Copy
        </button>
      </p>
      <p class="mt-2"><strong>Notes:</strong></p>
      <p id="modalNotes" class="whitespace-pre-wrap border rounded p-2 mt-1 bg-gray-50"></p>
    </div>
  </div>
</body>
</html>
